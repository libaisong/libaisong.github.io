<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1">
  <!-- <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.min.css"> -->

  <!-- 用于显示行内公式 -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>

  <script src="Markdown/js/marked/marked.min.js"></script>
  <script src="Markdown/js/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
  <script src="Markdown/js/mermaid/dist/mermaid.min.js"></script>
  <script src="../js/item_header_md.js?v=20210423"></script>
  <link rel="stylesheet" href="Markdown/css/github-markdown-css/5.1.0/github-markdown-light.min.css">
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      /* padding: 45px; */
      /* 上下的padding调小，显得紧凑一些 */
      padding: 15px 45px 15px 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }

    .mermaid {
    background-color: #f9f9f9;
    padding: 20px;
    margin: 10px 0;
    border-radius: 5px;
}
  </style>
  <title>这个网页可以显示markdown文件</title>
</head>

<body>

  <!-- 头像显示 -->
  <div>
    <a href="../../index.html">
        <div class="logo">
            <img class="logoimg" src="../../images/logo.png" alt="">
        </div>
    </a>
  </div>

  <article class="markdown-body">
    <div id="markdownContent"></div>
  </article>



  <script>

    const markdownUrl = 'Markdown/速度观测器.md';
    const markdownContentDiv = document.getElementById('markdownContent');

        // 初始化 Mermaid（可选配置）
        mermaid.initialize({ 
            theme: 'default',
            startOnLoad: false // 禁止自动渲染
        });

        // 自定义 Marked 渲染器
          const renderer = {
            code: function (code) {
              if (code.lang == 'mermaid') return `<pre class="mermaid">${code.text}</pre>`;
              return `<pre>${code.text}</pre>`;
            }
          }
          marked.use({ renderer });

    fetch(markdownUrl)
      .then(response => response.text())
      .then(markdownText => {
        // const converter = new showdown.Converter();
        // const html = converter.makeHtml(markdownText);
        markdownContent.innerHTML = markdownText;
        MathJax.typesetPromise(); // 让 MathJax 重新渲染页面上的数学公式
        markdownContent.innerHTML = marked.parse(markdownContent.innerHTML);
        
        
        // 手动渲染 Mermaid 图表
        mermaid.run({
            querySelector: '.mermaid',
            suppressErrors: true
        });
      });


  </script>

  <!-- 版权以及导航栏显示 -->
  <script src="../js/item_footer.js?v=20210423"></script>
</body>

</html>

<!-- 先这样设置 -->
<!-- python -m http.server 8000 -->

<!-- 然后在这个地址下面打开 -->
<!-- http://localhost:8000/ -->