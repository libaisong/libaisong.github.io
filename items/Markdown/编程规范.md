# 编程规范

不以规矩，不能成方圆。代码编写也是一样，如果一个软件团队没有统一的编程规范，不仅无法形成相近的编程风格，代码质量也很难保证。代码规范的制定和实施，要以实用为原则，充分借鉴常见规范与标准，结合团队现状，形成适合自己团队的编码规范。站在巨人的肩膀上，可以走得更好更快更远。笔者主要从事电机控制领域，因此本文所说的“编码规范”，具体指的是嵌入式软件的编码规范。   

## 编码规范介绍

嵌入式软件编码规范，主要包含两大部分内容，一个是形式层面的规范，另一个是语法层面的规范。形式层面的规范，例如变量名定义、注释格式等，通常不会对代码运行结果产生影响，但良好的形式可以提高代码的可读性；语法层面的规范，例如全局变量定义时需要进行初始化、类型转换规格等，这类规范会影响到代码的可靠性以及安全性，更加重要。  

![标准](编程规范-标准.svg)

对可靠性、安全性要求越高的行业，其编码规范往往更成熟更完善，比如汽车、航空航天等。MISRA-C、BARR-C是常见的嵌入式软件编码规范，国标中也有对应的编码规范《嵌入式软件C语言编码规范》（GB/T 28169-2011），这些都是可以借鉴或者直接拿来使用的优秀范例。  

## 静态检查工具

代码规范推广过程中，如何检查编写的代码是否符合规范，是一个很重要的问题。人工检查费时费力，容易出现错误或者遗漏，使用工具进行检查是更好的方案。静态检查工具可以分析代码是否符合规范，对于违反规范的代码，工具会进行定位和提示，以方便查找和修改。常用的静态检查工具有C/C++ test、SonarQube、Understand、CppCheck等，不同工具使用方法有所差异，支持的规范种类也有所不同，可以根据需要进行选择。  

![静态检查工具](编程规范-静态检查工具.svg)

